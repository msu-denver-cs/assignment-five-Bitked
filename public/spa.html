
<!DOCTYPE html>

<html>
<head>
<title>Assignment-Five-Bitked</title>
</head>
<body>

<button onclick="fetch('cars', ['make_id', 'vin', 'model'])">Cars</button>
<button onclick="fetch('makes', ['make', 'country'])">Makes</button>
<button onclick="fetch('parts', ['part'])">Parts</button>
<div id="display">
</div>

<script>
    /* Script by Dr. Beaty found here:  https://github.com/drsjb80/SPAs/blob/master/jsspa.html
    */
    let d = document.getElementById("display");
    let clear = function() {
        while(d.firstChild) {
            d.removeChild(d.firstChild);
        }
    };
    let post = function() {
    };
    let fetch = function(json, id) {
        let request = new XMLHttpRequest();
        var url = "http://localhost:3000/" + json + ".json";
        request.onreadystatechange = function() {
            if (request.readyState === 4 && request.status === 200) {
                clear();
                let arrayOfItems = JSON.parse(request.responseText);
                for (i in arrayOfItems) {
                    for (j in id) {
                        document.getElementById("display").innerHTML += '<li>' + arrayOfItems[i][id[j]] + ' ' + '</li>';
                    }
                }
            }
        };
        request.open("GET", url);
        request.send(null);
    };
</script>

</html>